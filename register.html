<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=2" />
  <titl - Eventos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
<main class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h2>Cadastro</h2>
      <form id="registerForm" class="card p-4">
        <div class="row">
          <div class="mb-3 col-md-6">
            <label class="form-label">Nome</label>
            <input id="regName" class="form-control" required>
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">Telefone</label>
            <input id="regPhone" class="form-control">
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Instituição</label>
          <input id="regInstitution" class="form-control" required>
        </div>
        <div class="row">
          <div class="mb-3 col-md-6">
            <label class="form-label">Usuário (username)</label>
            <input id="regUsername" class="form-control" required>
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">Senha</label>
            <input id="regPassword" type="password" class="form-control" required>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Perfil</label>
          <select id="regProfile" class="form-select" required>
            <option value="aluno">Aluno</option>
            <option value="professor">Professor</option>
            <option value="organizador">Organizador</option>
          </select>
        </div>

        <div class="d-flex gap-2">
          <button class="btn btn-success" type="submit">Criar Conta</button>
          <a href="login.html" class="btn btn-outline-secondary">Voltar ao login</a>
        </div>
        <div id="regMessage" class="mt-3"></div>
      </form>
    </div>
  </div>
</main>

<script src="scripts/app.js"></script>
<script>
document.getElementById('registerForm').addEventListener('submit', function(e){
  e.preventDefault();
  const user = {
    name: document.getElementById('regName').value.trim(),
    phone: document.getElementById('regPhone').value.trim(),
    institution: document.getElementById('regInstitution').value.trim(),
    username: document.getElementById('regUsername').value.trim(),
    password: document.getElementById('regPassword').value,
    profile: document.getElementById('regProfile').value,
  };
  const msg = document.getElementById('regMessage');
  try {
    registerUser(user);
    msg.className = 'text-success';
    msg.textContent = 'Usuário criado com sucesso! Redirecionando para login...';
    setTimeout(() => window.location.href = 'login.html', 900);
  } catch(err) {
    msg.className = 'text-danger';
    msg.textContent = err.message;
  }
});
</script>
</body>
</html>